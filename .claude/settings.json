{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Edit|Write|NotebookEdit",
        "hooks": [
          {
            "type": "command",
            "command": "branch=$(git rev-parse --abbrev-ref HEAD 2>/dev/null); if [ \"$branch\" = \"main\" ] || [ \"$branch\" = \"master\" ]; then echo \"BLOCKED: You're on '$branch'. Create a worktree first: git worktree add ../<feature-name> -b <feature-name> main\" >&2; exit 1; fi"
          }
        ]
      }
    ]
  }
}
